<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inscription</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="auth-body">
  <div class="container auth-shell">
    <div class="auth-card">
      <!-- Header mobile -->
      <div class="auth-mobile-header">
        <img src="/favicon.svg" alt="QrDynamic" class="auth-mobile-header__logo" />
      </div>

      <!-- Illustration desktop -->
      <div class="auth-illustration register-illustration">
        <div class="auth-illustration__content">
          <span class="auth-badge">Onboarding guidé</span>
          <h2>Lancez votre premier mini-site en moins de 5 minutes</h2>
          <p>
            Profitez d'un assistant pas-à-pas, de sections pré-remplies et d'un QR code immédiatement prêt à être
            imprimé.
          </p>
          <div class="auth-pill">
            <i class="fa-solid fa-star" aria-hidden="true"></i>
            +2 créateurs actifs
          </div>
        </div>
      </div>

      <div class="auth-panel card admin auth-panel--form">
        <div class="auth-panel__header with-icon with-icon-block">
          <div>
            <h1>Bienvenue sur QrDynamic</h1>
            <p>
              Créez votre compte et découvrez la création de sites web en un clic.
            </p>
          </div>
        </div>

        <% if (error) { %>
          <div class="alert alert-error">
            <%= error %>
          </div>
          <% } %>
            <% if (success) { %>
              <div class="alert alert-success">
                <%= success %>
              </div>
              <% } %>

                <form method="POST" action="/register">
                  <% if (inviteToken) { %>
                    <input type="hidden" name="inviteToken" value="<%= inviteToken %>" />
                    <div class="alert alert-info with-icon with-icon-block">
                      <i class="fa-solid fa-envelope" aria-hidden="true"></i>
                      <span>Vous avez une invitation en attente. Créez un compte pour l'accepter.</span>
                    </div>
                    <% } %>
                      <div class="form-group">
                        <label>Nom d'utilisateur :</label>
                        <input type="text" name="username" required autofocus placeholder="Votre nom d'utilisateur"
                          minlength="3" maxlength="30" />
                      </div>
                      <div class="form-group">
                        <label>Email :</label>
                        <input type="email" name="email" required placeholder="email@exemple.com" />
                      </div>
                      <div class="form-group">
                        <label>Mot de passe :</label>
                        <input type="password" name="password" required placeholder="Minimum 6 caractères"
                          minlength="6" />
                      </div>
                      <div class="form-group">
                        <label>Confirmer le mot de passe :</label>
                        <input type="password" name="confirmPassword" required placeholder="Répétez le mot de passe" />
                      </div>
                      <button type="submit">Créer mon compte</button>
                </form>

                <% if (googleAuthEnabled) { %>
                  <div class="auth-divider"><span>ou</span></div>
                  <div class="google-button-container">
                    <a class="google-button google-button--rich"
                      href="/auth/google<%= inviteToken ? ('?inviteToken=' + encodeURIComponent(inviteToken)) : '' %>">

                      <% if (googleSuggestedAccount && googleSuggestedAccount.avatarUrl) { %>
                        <span class="google-button__avatar">
                          <img src="<%= googleSuggestedAccount.avatarUrl %>" alt="Photo de profil Google" />
                        </span>
                        <% } else { %>
                          <span class="google-button__badge" aria-hidden="true">
                            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="" />
                          </span>
                          <% } %>
                            <span class="google-button__content">
                              <span class="google-button__title">
                                <% if (googleSuggestedAccount && googleSuggestedAccount.name) { %>
                                  Continuer en tant que <%= googleSuggestedAccount.name %>
                                    <% } else { %>
                                      Continuer avec Google
                                      <% } %>
                              </span>
                              <% if (googleSuggestedAccount && googleSuggestedAccount.email) { %>
                                <span class="google-button__subtitle">
                                  <%= googleSuggestedAccount.email %>
                                </span>
                                <% } else { %>
                                  <span class="google-button__subtitle">Connexion sécurisée via Google</span>
                                  <% } %>
                            </span>
                            <% if (googleSuggestedAccount && googleSuggestedAccount.avatarUrl) { %>
                              <span class="google-button__badge" aria-hidden="true">
                                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="" />
                              </span>
                              <% } %>
                    </a>
                  </div>
                  <% } %>
                    <div class="auth-footer-link">
                      <p>Déjà un compte ? <a href="/login">Se connecter</a></p>
                    </div>
      </div>
    </div>
  </div>
</body>

</html>