<!-- Preview Expand - Gestion du bouton d'agrandissement en plein écran -->
<script>
(function() {
  const previewExpandButton = document.getElementById('previewExpandButton');
  const previewAside = document.querySelector('.admin-studio__preview');
  
  if (!previewExpandButton || !previewAside) return;

  let isFullscreen = false;

  function toggleFullscreen() {
    isFullscreen = !isFullscreen;
    previewAside.classList.toggle('preview-fullscreen', isFullscreen);
    
    const icon = previewExpandButton.querySelector('i');
    if (icon) {
      if (isFullscreen) {
        icon.classList.remove('fa-expand');
        icon.classList.add('fa-compress');
        previewExpandButton.setAttribute('aria-label', 'Réduire la prévisualisation');
      } else {
        icon.classList.remove('fa-compress');
        icon.classList.add('fa-expand');
        previewExpandButton.setAttribute('aria-label', 'Agrandir la prévisualisation en plein écran');
      }
    }
  }

  previewExpandButton.addEventListener('click', (e) => {
    e.preventDefault();
    e.stopPropagation();
    toggleFullscreen();
  });

  // Fermer le plein écran avec la touche Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && isFullscreen) {
      toggleFullscreen();
    }
  });
})();
</script>

